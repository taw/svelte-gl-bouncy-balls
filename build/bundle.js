var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function a(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function s(n,...e){if(null==n)return t;const i=n.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function c(t,n,e){t.$$.on_destroy.push(s(n,e))}function l(t,n,e,i){if(t){const o=u(t,n,e,i);return t[0](o)}}function u(t,e,i,o){return t[1]&&o?n(i.ctx.slice(),t[1](o(e))):i.ctx}function f(t,n,e,i,o,r,a){const s=function(t,n,e,i){if(t[2]&&i){const o=t[2](i(e));if(void 0===n.dirty)return o;if("object"==typeof o){const t=[],e=Math.max(n.dirty.length,o.length);for(let i=0;i<e;i+=1)t[i]=n.dirty[i]|o[i];return t}return n.dirty|o}return n.dirty}(n,i,o,r);if(s){const o=u(n,e,i,a);t.p(o,s)}}function d(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}function m(t,n,e=n){return t.set(e),n}function h(t,n){t.appendChild(n)}function p(t,n,e){t.insertBefore(n,e||null)}function _(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function g(){return t=" ",document.createTextNode(t);var t}function $(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function y(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let w,b;function x(){if(void 0===w){w=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){w=!0}}return w}function E(t){b=t}function A(){if(!b)throw new Error("Function called outside component initialization");return b}function L(t){A().$$.on_mount.push(t)}function T(t){A().$$.on_destroy.push(t)}function F(t,n){A().$$.context.set(t,n)}function M(t){return A().$$.context.get(t)}const I=[],S=[],R=[],O=[],N=Promise.resolve();let D=!1;function z(){D||(D=!0,N.then(H))}function P(t){R.push(t)}let G=!1;const C=new Set;function H(){if(!G){G=!0;do{for(let t=0;t<I.length;t+=1){const n=I[t];E(n),U(n.$$)}for(E(null),I.length=0;S.length;)S.pop()();for(let t=0;t<R.length;t+=1){const n=R[t];C.has(n)||(C.add(n),n())}R.length=0}while(I.length);for(;O.length;)O.pop()();D=!1,G=!1,C.clear()}}function U(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(P)}}const B=new Set;let Y;function k(){Y={r:0,c:[],p:Y}}function q(){Y.r||o(Y.c),Y=Y.p}function W(t,n){t&&t.i&&(B.delete(t),t.i(n))}function X(t,n,e,i){if(t&&t.o){if(B.has(t))return;B.add(t),Y.c.push((()=>{B.delete(t),i&&(e&&t.d(1),i())})),t.o(n)}}function j(t){t&&t.c()}function V(t,n,i){const{fragment:a,on_mount:s,on_destroy:c,after_update:l}=t.$$;a&&a.m(n,i),P((()=>{const n=s.map(e).filter(r);c?c.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(P)}function J(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function K(n,e,r,a,s,c,l=[-1]){const u=b;E(n);const f=e.props||{},d=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:l,skip_bound:!1};let m=!1;if(d.ctx=r?r(n,f,((t,e,...i)=>{const o=i.length?i[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&function(t,n){-1===t.$$.dirty[0]&&(I.push(t),z(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}(n,t)),e})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(_)}else d.fragment&&d.fragment.c();e.intro&&W(n.$$.fragment),V(n,e.target,e.anchor),H()}E(u)}class Q{$destroy(){J(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Z=[];function tt(n,e=t){let i;const o=[];function r(t){if(a(n,t)&&(n=t,i)){const t=!Z.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),Z.push(e,n)}if(t){for(let t=0;t<Z.length;t+=2)Z[t][0](Z[t+1]);Z.length=0}}}return{set:r,update:function(t){r(t(n))},subscribe:function(a,s=t){const c=[a,s];return o.push(c),1===o.length&&(i=e(r)||t),a(n),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(i(),i=null)}}}}const nt={},et={},it={};function ot(){return M(nt)}function rt(){return M(it)}function at(t,n){const e=t.indexOf(n);~e&&function(t,n){t[n]=t[t.length-1],t.pop()}(t,e)}function st(t,n){let e=0;const i=[],o=[],r=[],a={index:0,meshes:i,transparent_meshes:o,child_layers:r,needs_sort:!1,needs_transparency_sort:!0,add_mesh:(t,e)=>{e&&at(t.transparent?i:o,t),t.transparent?(o.push(t),a.needs_transparency_sort=!0):i.push(t),T((()=>{at(i,t),at(o,t),n()}))},add_child:(t=e++)=>{const i=st(t,n);return r.push(i),a.needs_sort=!0,T((()=>{at(r,i),a.needs_sort=!0,n()})),i}};return a}function ct(t){if("number"==typeof t){return new Float32Array([((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255])}return t}function lt(t,n=t){let e=0;for(let t=0;t<n.length;t+=1)e+=n[t]*n[t];const i=Math.sqrt(e);return t[0]=n[0]/i,t[1]=n[1]/i,t[2]=n[2]/i,t}function ut(t){const n=new Map;return(...e)=>{const i=JSON.stringify(e);return n.has(i)||n.set(i,t(...e)),n.get(i)}}var ft="undefined"!=typeof Float32Array?Float32Array:Array;function dt(){var t=new ft(16);return ft!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function mt(t,n){var e=n[0],i=n[1],o=n[2],r=n[3],a=n[4],s=n[5],c=n[6],l=n[7],u=n[8],f=n[9],d=n[10],m=n[11],h=n[12],p=n[13],_=n[14],v=n[15],g=e*s-i*a,$=e*c-o*a,y=e*l-r*a,w=i*c-o*s,b=i*l-r*s,x=o*l-r*c,E=u*p-f*h,A=u*_-d*h,L=u*v-m*h,T=f*_-d*p,F=f*v-m*p,M=d*v-m*_,I=g*M-$*F+y*T+w*L-b*A+x*E;return I?(I=1/I,t[0]=(s*M-c*F+l*T)*I,t[1]=(o*F-i*M-r*T)*I,t[2]=(p*x-_*b+v*w)*I,t[3]=(d*b-f*x-m*w)*I,t[4]=(c*L-a*M-l*A)*I,t[5]=(e*M-o*L+r*A)*I,t[6]=(_*y-h*x-v*$)*I,t[7]=(u*x-d*y+m*$)*I,t[8]=(a*F-s*L+l*E)*I,t[9]=(i*L-e*F-r*E)*I,t[10]=(h*b-p*y+v*g)*I,t[11]=(f*y-u*b-m*g)*I,t[12]=(s*A-a*T-c*E)*I,t[13]=(e*T-i*A+o*E)*I,t[14]=(p*$-h*w-_*g)*I,t[15]=(u*w-f*$+d*g)*I,t):null}function ht(t,n,e){var i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],m=n[10],h=n[11],p=n[12],_=n[13],v=n[14],g=n[15],$=e[0],y=e[1],w=e[2],b=e[3];return t[0]=$*i+y*s+w*f+b*p,t[1]=$*o+y*c+w*d+b*_,t[2]=$*r+y*l+w*m+b*v,t[3]=$*a+y*u+w*h+b*g,$=e[4],y=e[5],w=e[6],b=e[7],t[4]=$*i+y*s+w*f+b*p,t[5]=$*o+y*c+w*d+b*_,t[6]=$*r+y*l+w*m+b*v,t[7]=$*a+y*u+w*h+b*g,$=e[8],y=e[9],w=e[10],b=e[11],t[8]=$*i+y*s+w*f+b*p,t[9]=$*o+y*c+w*d+b*_,t[10]=$*r+y*l+w*m+b*v,t[11]=$*a+y*u+w*h+b*g,$=e[12],y=e[13],w=e[14],b=e[15],t[12]=$*i+y*s+w*f+b*p,t[13]=$*o+y*c+w*d+b*_,t[14]=$*r+y*l+w*m+b*v,t[15]=$*a+y*u+w*h+b*g,t}function pt(t,n,e){var i,o,r,a,s,c,l,u,f,d,m,h,p=e[0],_=e[1],v=e[2];return n===t?(t[12]=n[0]*p+n[4]*_+n[8]*v+n[12],t[13]=n[1]*p+n[5]*_+n[9]*v+n[13],t[14]=n[2]*p+n[6]*_+n[10]*v+n[14],t[15]=n[3]*p+n[7]*_+n[11]*v+n[15]):(i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],m=n[10],h=n[11],t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=f,t[9]=d,t[10]=m,t[11]=h,t[12]=i*p+s*_+f*v+n[12],t[13]=o*p+c*_+d*v+n[13],t[14]=r*p+l*_+m*v+n[14],t[15]=a*p+u*_+h*v+n[15]),t}function _t(t,n,e,i){var o=n[0],r=n[1],a=n[2],s=n[3],c=o+o,l=r+r,u=a+a,f=o*c,d=o*l,m=o*u,h=r*l,p=r*u,_=a*u,v=s*c,g=s*l,$=s*u,y=i[0],w=i[1],b=i[2];return t[0]=(1-(h+_))*y,t[1]=(d+$)*y,t[2]=(m-g)*y,t[3]=0,t[4]=(d-$)*w,t[5]=(1-(f+_))*w,t[6]=(p+v)*w,t[7]=0,t[8]=(m+g)*b,t[9]=(p-v)*b,t[10]=(1-(f+h))*b,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function vt(t,n,e,i){var o=n[0],r=n[1],a=n[2],s=i[0],c=i[1],l=i[2],u=o-e[0],f=r-e[1],d=a-e[2],m=u*u+f*f+d*d;m>0&&(u*=m=1/Math.sqrt(m),f*=m,d*=m);var h=c*d-l*f,p=l*u-s*d,_=s*f-c*u;return(m=h*h+p*p+_*_)>0&&(h*=m=1/Math.sqrt(m),p*=m,_*=m),t[0]=h,t[1]=p,t[2]=_,t[3]=0,t[4]=f*_-d*p,t[5]=d*h-u*_,t[6]=u*p-f*h,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=o,t[13]=r,t[14]=a,t[15]=1,t}function gt(){var t=new ft(3);return ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function $t(t,n,e){var i=new ft(3);return i[0]=t,i[1]=n,i[2]=e,i}function yt(t,n){var e=n[0],i=n[1],o=n[2],r=e*e+i*i+o*o;return r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function wt(t,n,e){var i=n[0],o=n[1],r=n[2],a=e[0],s=e[1],c=e[2];return t[0]=o*c-r*s,t[1]=r*a-i*c,t[2]=i*s-o*a,t}function bt(t,n,e){var i=n[0],o=n[1],r=n[2],a=e[3]*i+e[7]*o+e[11]*r+e[15];return a=a||1,t[0]=(e[0]*i+e[4]*o+e[8]*r+e[12])/a,t[1]=(e[1]*i+e[5]*o+e[9]*r+e[13])/a,t[2]=(e[2]*i+e[6]*o+e[10]*r+e[14])/a,t}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var xt,Et=function(t){var n=t[0],e=t[1],i=t[2];return Math.hypot(n,e,i)};xt=gt();const At=t=>({width:8&t[0],height:16&t[0]}),Lt=t=>({width:t[3],height:t[4]});function Tt(t){let n;const e=t[12].default,i=l(e,t,t[11],Lt);return{c(){i&&i.c()},m(t,e){i&&i.m(t,e),n=!0},p(t,n){i&&i.p&&2072&n[0]&&f(i,e,t,t[11],n,At,Lt)},i(t){n||(W(i,t),n=!0)},o(t){X(i,t),n=!1},d(t){i&&i.d(t)}}}function Ft(t){let n,e,i,o,r,a=t[2]&&Tt(t);return{c(){n=v("div"),e=v("canvas"),i=g(),a&&a.c(),y(e,"class","svelte-6pzapg"),y(n,"class","container svelte-6pzapg"),P((()=>t[14].call(n)))},m(s,c){p(s,n,c),h(n,e),t[13](e),h(n,i),a&&a.m(n,null),o=function(t,n){const e=getComputedStyle(t),i=(parseInt(e.zIndex)||0)-1;"static"===e.position&&(t.style.position="relative");const o=v("iframe");o.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${i};`),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const r=x();let a;return r?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=$(window,"message",(t=>{t.source===o.contentWindow&&n()}))):(o.src="about:blank",o.onload=()=>{a=$(o.contentWindow,"resize",n)}),h(t,o),()=>{(r||a&&o.contentWindow)&&a(),_(o)}}(n,t[14].bind(n)),r=!0},p(t,e){t[2]?a?(a.p(t,e),4&e[0]&&W(a,1)):(a=Tt(t),a.c(),W(a,1),a.m(n,null)):a&&(k(),X(a,1,1,(()=>{a=null})),q())},i(t){r||(W(a),r=!0)},o(t){X(a),r=!1},d(e){e&&_(n),t[13](null),a&&a.d(),o()}}}function Mt(t){return{subscribe:tt(!1,(n=>{if("undefined"!=typeof IntersectionObserver){const e=new IntersectionObserver((e=>{n(function(t){const n=t.getBoundingClientRect();return n.bottom>0&&n.right>0&&n.top<window.innerHeight&&n.left<window.innerWidth}(t))}));return e.observe(t),()=>e.unobserve(t)}if("undefined"!=typeof window){function e(){const{top:e,bottom:i}=t.getBoundingClientRect();n(i>0&&e<window.innerHeight)}return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}})).subscribe}}function It(e,i,o){let r,a,l,u=t,f=()=>(u(),u=s(b,(t=>o(23,l=t))),b);e.$$.on_destroy.push((()=>u()));let{$$slots:h={},$$scope:p}=i,{background:_=[1,1,1]}=i,{backgroundOpacity:v=1}=i,{fog:g}=i,{pixelRatio:$}=i;const y="fog"in i;let w,b=tt(!1);f();let x,E=!1,A=!1,M=()=>{},I={camera_matrix:tt(),view:tt(),projection:tt()};const R="undefined"!=typeof window?()=>{A||(A=!0,requestAnimationFrame(M))}:()=>{},O=tt(1);c(e,O,(t=>o(3,r=t)));const D=tt(1);c(e,D,(t=>o(4,a=t)));const P=st(0,R),G={};let C=G;const H={ambient:[],directional:[],point:[]};function U(t){return n=>{t.push(n),R(),T((()=>{const e=t.indexOf(n);~e&&t.splice(e,1),R()}))}}const B=new Map;let Y=!0;const k={defines:[`#define NUM_LIGHTS 2\n#define USE_FOG ${y}\n`].join(""),add_camera:t=>{if(C&&C!==G)throw new Error("A scene can only have one camera");C=t,R(),I.camera_matrix.set(C.matrix),I.projection.set(C.projection),I.view.set(C.view),T((()=>{C=G,R()}))},update_camera:t=>{I.camera_matrix.set(t.matrix),I.view.set(t.view),I.projection.set(t.projection),Y=!0,R()},add_directional_light:U(H.directional),add_point_light:U(H.point),add_ambient_light:U(H.ambient),get_target:t=>(B.has(t)||B.set(t,tt(null)),B.get(t)),invalidate:R,...I,width:O,height:D};F(nt,k),F(et,P);const q=((W=dt())[0]=1,W[1]=0,W[2]=0,W[3]=0,W[4]=0,W[5]=1,W[6]=0,W[7]=0,W[8]=0,W[9]=0,W[10]=1,W[11]=0,W[12]=0,W[13]=0,W[14]=0,W[15]=1,W);var W;const X=tt(q);F(it,{get_matrix_world:()=>q,ctm:{subscribe:X.subscribe}}),L((()=>{o(20,k.canvas=w,k),o(2,x=o(20,k.gl=w.getContext("webgl"),k)),f(o(1,b=Mt(w)));["OES_element_index_uint","OES_standard_derivatives"].forEach((t=>{if(!x.getExtension(t))throw new Error("Unsupported extension: "+t)})),M=t=>{if(!C)return;if(V){const t=$||window.devicePixelRatio||1;o(0,w.width=r*t,w),o(0,w.height=a*t,w),x.viewport(0,0,r*t,a*t),V=!1}if(A=!1,!l&&!t)return void o(15,E=!0);o(15,E=!1),x.clearColor(...J,v),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT),x.enable(x.CULL_FACE),x.enable(x.BLEND);const n=H.ambient.reduce(((t,{color:n,intensity:e})=>[Math.min(t[0]+n[0]*e,1),Math.min(t[1]+n[1]*e,1),Math.min(t[2]+n[2]*e,1)]),new Float32Array([0,0,0]));let e,i={[x.DEPTH_TEST]:null,[x.CULL_FACE]:null};const s=(t,n)=>{i[t]!==n&&(n?x.enable(t):x.disable(t),i[t]=n)};function c({model:t,model_inverse_transpose:i,geometry:o,material:r,depthTest:a,doubleSided:c}){if(r){if(s(x.DEPTH_TEST,!1!==a),s(x.CULL_FACE,!0!==c),x.blendFuncSeparate(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA,x.SRC_ALPHA,x.ONE),r.program!==e){if(e=r.program,x.useProgram(r.program),x.uniform3fv(r.uniform_locations.AMBIENT_LIGHT,n),y&&(x.uniform3fv(r.uniform_locations.FOG_COLOR,J),x.uniform1f(r.uniform_locations.FOG_DENSITY,g)),r.uniform_locations.DIRECTIONAL_LIGHTS)for(let t=0;t<8;t+=1){const n=H.directional[t];if(!n)break;x.uniform3fv(r.uniform_locations.DIRECTIONAL_LIGHTS[t].direction,n.direction),x.uniform3fv(r.uniform_locations.DIRECTIONAL_LIGHTS[t].color,n.color),x.uniform1f(r.uniform_locations.DIRECTIONAL_LIGHTS[t].intensity,n.intensity)}if(r.uniform_locations.POINT_LIGHTS)for(let t=0;t<8;t+=1){const n=H.point[t];if(!n)break;x.uniform3fv(r.uniform_locations.POINT_LIGHTS[t].location,n.location),x.uniform3fv(r.uniform_locations.POINT_LIGHTS[t].color,n.color),x.uniform1f(r.uniform_locations.POINT_LIGHTS[t].intensity,n.intensity)}x.uniform3fv(r.uniform_locations.CAMERA_WORLD_POSITION,C.world_position),x.uniformMatrix4fv(r.uniform_locations.VIEW,!1,C.view),x.uniformMatrix4fv(r.uniform_locations.PROJECTION,!1,C.projection)}if(x.uniformMatrix4fv(r.uniform_locations.MODEL,!1,t),x.uniformMatrix4fv(r.uniform_locations.MODEL_INVERSE_TRANSPOSE,!1,i),r.apply_uniforms(x),o.set_attributes(x),o.index)x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,o.buffers.__index),x.drawElements(x[o.primitive],o.index.length,x.UNSIGNED_INT,0);else{const t=x[o.primitive];x.drawArrays(t,0,o.count)}}}!function t(n){n.needs_sort&&(n.child_layers.sort(((t,n)=>t.index-n.index)),n.needs_sort=!1),x.depthMask(!0),x.clearDepth(1),x.clear(x.DEPTH_BUFFER_BIT);for(let t=0;t<n.meshes.length;t+=1)c(n.meshes[t]);x.depthMask(!1),(Y||n.needs_transparency_sort)&&(j(n.transparent_meshes),n.needs_transparency_sort=!1);for(let t=0;t<n.transparent_meshes.length;t+=1)c(n.transparent_meshes[t]);for(let e=0;e<n.child_layers.length;e+=1)t(n.child_layers[e])}(P),Y=!1};const t=setTimeout((()=>{m(O,r=w.clientWidth,r),m(D,a=w.clientHeight,a)}));return(z(),N).then((()=>M(!0))),()=>{x.getExtension("WEBGL_lose_context").loseContext(),clearTimeout(t)}}));const j=t=>{if(t.length<2)return;const n=new Map,e=new Float32Array(16);t.forEach((t=>{const i=ht(e,C.view,t.model)[14];n.set(t,i)})),t.sort(((t,e)=>n.get(t)-n.get(e)))};let V=!0;let J;return e.$$set=t=>{o(39,i=n(n({},i),d(t))),"background"in t&&o(7,_=t.background),"backgroundOpacity"in t&&o(8,v=t.backgroundOpacity),"fog"in t&&o(9,g=t.fog),"pixelRatio"in t&&o(10,$=t.pixelRatio),"$$scope"in t&&o(11,p=t.$$scope)},e.$$.update=()=>{128&e.$$.dirty[0]&&(J=ct(_)),24&e.$$.dirty[0]&&(V=!0,R()),1049472&e.$$.dirty[0]&&k.invalidate(),9469952&e.$$.dirty[0]&&l&&E&&k.invalidate()},i=d(i),[w,b,x,r,a,O,D,_,v,g,$,p,h,function(t){S[t?"unshift":"push"]((()=>{w=t,o(0,w)}))},function(){r=this.clientWidth,O.set(r),a=this.clientHeight,D.set(a)}]}class St extends Q{constructor(t){super(),K(this,t,It,Ft,a,{background:7,backgroundOpacity:8,fog:9,pixelRatio:10},[-1,-1])}}!function(){var t,n=(t=new ft(4),ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Rt(){var t=new ft(4);return ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ot(t,n,e,i){var o,r,a,s,c,l=n[0],u=n[1],f=n[2],d=n[3],m=e[0],h=e[1],p=e[2],_=e[3];return(r=l*m+u*h+f*p+d*_)<0&&(r=-r,m=-m,h=-h,p=-p,_=-_),1-r>1e-6?(o=Math.acos(r),a=Math.sin(o),s=Math.sin((1-i)*o)/a,c=Math.sin(i*o)/a):(s=1-i,c=i),t[0]=s*l+c*m,t[1]=s*u+c*h,t[2]=s*f+c*p,t[3]=s*d+c*_,t}function Nt(t,n,e,i){var o=.5*Math.PI/180;n*=o,e*=o,i*=o;var r=Math.sin(n),a=Math.cos(n),s=Math.sin(e),c=Math.cos(e),l=Math.sin(i),u=Math.cos(i);return t[0]=r*c*u-a*s*l,t[1]=a*s*u+r*c*l,t[2]=a*c*l-r*s*u,t[3]=a*c*u+r*s*l,t}var Dt,zt,Pt,Gt,Ct,Ht,Ut,Bt=function(t,n){var e=n[0],i=n[1],o=n[2],r=n[3],a=e*e+i*i+o*o+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e*a,t[1]=i*a,t[2]=o*a,t[3]=r*a,t};Dt=gt(),zt=$t(1,0,0),Pt=$t(0,1,0),Gt=Rt(),Ct=Rt(),Ht=new ft(9),ft!=Float32Array&&(Ht[1]=0,Ht[2]=0,Ht[3]=0,Ht[5]=0,Ht[6]=0,Ht[7]=0),Ht[0]=1,Ht[4]=1,Ht[8]=1,Ut=Ht;function Yt(t){let n;const e=t[9].default,i=l(e,t,t[8],null);return{c(){i&&i.c()},m(t,e){i&&i.m(t,e),n=!0},p(t,[n]){i&&i.p&&256&n&&f(i,e,t,t[8],n,null,null)},i(t){n||(W(i,t),n=!0)},o(t){X(i,t),n=!1},d(t){i&&i.d(t)}}}function kt(n,e,i){let o,r,a,l=t;n.$$.on_destroy.push((()=>l()));let{$$slots:u={},$$scope:f}=e,{location:d=[0,0,0]}=e,{lookAt:h}=e,{up:p=[0,1,0]}=e,{rotation:_=[0,0,0]}=e,{scale:v=1}=e;const g=ot(),$=rt(),{ctm:y}=$;c(n,y,(t=>i(14,r=t)));const w=tt(null);c(n,w,(t=>i(15,a=t)));let b=dt(),x=Rt();const E=new Float32Array(b.buffer,48,3);let A,L;return function(t){F(it,t)}({ctm:w}),n.$$set=t=>{"location"in t&&i(3,d=t.location),"lookAt"in t&&i(4,h=t.lookAt),"up"in t&&i(5,p=t.up),"rotation"in t&&i(6,_=t.rotation),"scale"in t&&i(7,v=t.scale),"$$scope"in t&&i(8,f=t.$$scope)},n.$$.update=()=>{128&n.$$.dirty&&i(12,A="number"==typeof v?[v,v,v]:v),16&n.$$.dirty&&(i(0,L=h?g.get_target(h):tt(null)),l(),l=s(L,(t=>i(13,o=t)))),64616&n.$$.dirty&&(o?(pt(b,r,d),vt(b,E,o,p),function(t,n,e){var i=e[0],o=e[1],r=e[2];t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=n[3]*i,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]}(b,b,A),m(w,a=b,a)):(i(11,x=Nt(x||Rt(),..._)),i(10,b=_t(b,x,d,A)),m(w,a=ht(a||dt(),r,b),a))),32768&n.$$.dirty&&g.invalidate()},[L,y,w,d,h,p,_,v,f,u]}class qt extends Q{constructor(t){super(),K(this,t,kt,Yt,a,{location:3,lookAt:4,up:5,rotation:6,scale:7})}}const Wt=new Map,Xt={5126:(t,n,e)=>t.uniform1f(n,e),35664:(t,n,e)=>t.uniform2fv(n,e),35665:(t,n,e)=>t.uniform3fv(n,e),35666:(t,n,e)=>t.uniform4fv(n,e),35674:(t,n,e)=>t.uniformMatrix2fv(n,!1,e),35675:(t,n,e)=>t.uniformMatrix3fv(n,!1,e),35676:(t,n,e)=>t.uniformMatrix4fv(n,!1,e),35678:(t,n,e)=>{t.activeTexture(t["TEXTURE"+e.index]),t.bindTexture(t.TEXTURE_2D,e.texture),t.uniform1i(n,e.index)}};function jt(t,n,e){Wt.has(t)||Wt.set(t,new Map);const i=Wt.get(t),o=n+e;if(!i.has(o)){const r=function(t,n,e){const i=t.createProgram();t.attachShader(i,Kt(t,t.VERTEX_SHADER,n,"vertex")),t.attachShader(i,Kt(t,t.FRAGMENT_SHADER,e,"fragment")),t.linkProgram(i);if(!t.getProgramParameter(i,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(i)),new Error("Failed to compile program:\n"+t.getProgramInfoLog(i));return i}(t,n,e),a=function(t,n){const e=[],i=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let o=0;o<i;o+=1){let{size:i,type:r,name:a}=t.getActiveUniform(n,o);const s=t.getUniformLocation(n,a),c=Xt[r];if(!c)throw new Error(`not implemented ${r} (${a})`);e.push({size:i,type:r,name:a,setter:c,loc:s})}return e}(t,r),s=function(t,n){const e=[],i=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o+=1){let{size:i,type:r,name:a}=t.getActiveAttrib(n,o);a=a.replace("[0]","");const s=t.getAttribLocation(n,a);e.push({size:i,type:r,name:a,loc:s})}return e}(t,r);i.set(o,{program:r,uniforms:a,attributes:s})}return i.get(o)}function Vt(t,n=4){for(t=String(t);t.length<n;)t=" "+t;return t}function Jt(t,n){let e="";for(;n--;)e+=t;return e}function Kt(t,n,e,i){const o=t.createShader(n);if(t.shaderSource(o,e),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;const r=t.getShaderInfoLog(o),a=/ERROR: (\d+):(\d+): (.+)/.exec(r);if(a){const t=+a[1],n=+a[2]-1;console.log("%c"+a[3],"font-weight: bold; color: red");const o=e.split("\n");for(let e=0;e<o.length;e+=1){if(Math.abs(n-e)>5)continue;const i=o[e].replace(/^\t+/gm,(t=>Jt(" ",4*t.length))),r=/^\s+/.exec(i),a=`${Vt(e)}: ${i}`;e===n?(console.log("%c"+a,"font-weight: bold; color: red"),console.log("%c"+(r&&r[0]||"")+Jt(" ",t+6)+"^","color: red")):console.log(a)}throw new Error(`Failed to compile ${i} shader`)}throw new Error(`Failed to compile ${i} shader:\n${r}`)}class Qt{constructor(t,n,e,i){this.scene=t;const o=t.gl;this.gl=o;const{program:r,uniforms:a,attributes:s}=jt(o,t.defines+i+"\n\nprecision highp float;\n#define GLSLIFY 1\nuniform mat4 MODEL;uniform mat4 PROJECTION;uniform mat4 VIEW;uniform mat4 MODEL_INVERSE_TRANSPOSE;uniform vec3 CAMERA_WORLD_POSITION;struct PointLight{vec3 location;vec3 color;float intensity;};uniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n"+n,t.defines+i+"\n\n#extension GL_OES_standard_derivatives : enable\nprecision highp float;\n#define GLSLIFY 1\nstruct DirectionalLight{vec3 direction;vec3 color;float intensity;};struct PointLight{vec3 location;vec3 color;float intensity;};uniform vec3 AMBIENT_LIGHT;uniform DirectionalLight DIRECTIONAL_LIGHTS[NUM_LIGHTS];uniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n"+e);this.program=r,this.uniforms=a,this.attributes=s,this.uniform_locations={},this.uniforms.forEach((t=>{!function(t,n,e){const i=n.replace(/\]$/,"").split(/\[|\]\.|\./);for(;i.length>1;){const n=i.shift(),e=i[0];t[n]||(t[n]=/^\d+$/.test(e)?[]:{}),t=t[n]}t[i[0]]=e}(this.uniform_locations,t.name,o.getUniformLocation(this.program,t.name))})),this.attribute_locations={},this.attributes.forEach((t=>{this.attribute_locations[t.name]=o.getAttribLocation(this.program,t.name)})),this.raw_values={},this.values={}}set_uniforms(t){let n=0;this.uniforms.forEach((({name:e,type:i,loc:o,setter:r,processor:a})=>{if(e in t){let o=t[e];if(o===this.raw_values[e])return;if(35678===i)return void(this.values[e]={texture:o.instantiate(this.scene)._,index:n++});"number"==typeof o&&5126!==i&&(o=ct(o)),this.values[e]=o}})),this.raw_values=t}apply_uniforms(t,n){this.uniforms.forEach((n=>{n.name in this.values&&n.setter(t,n.loc,this.values[n.name])}))}destroy(){}}var Zt="#define GLSLIFY 1\nattribute vec3 position;attribute vec3 normal;varying vec3 v_normal;\n#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap)\n#define has_textures true\n#endif\n#ifdef has_textures\nattribute vec2 uv;varying vec2 v_uv;\n#endif\n#if defined(has_normalmap) || defined(has_bumpmap)\nvarying vec3 v_view_position;\n#endif\nvarying vec3 v_surface_to_light[NUM_LIGHTS];\n#ifdef has_specularity\nvarying vec3 v_surface_to_view[NUM_LIGHTS];\n#endif\n#ifdef USE_FOG\nvarying float v_fog_depth;\n#endif\nvoid main(){vec4 pos=vec4(position,1.0);vec4 model_view_pos=VIEW*MODEL*pos;v_normal=(MODEL_INVERSE_TRANSPOSE*vec4(normal,0.0)).xyz;\n#ifdef has_textures\nv_uv=uv;\n#endif\n#if defined(has_normalmap) || defined(has_bumpmap)\nv_view_position=model_view_pos.xyz;\n#endif\n#ifdef USE_FOG\nv_fog_depth=-model_view_pos.z;\n#endif\nfor(int i=0;i<NUM_LIGHTS;i+=1){PointLight light=POINT_LIGHTS[i];vec3 surface_world_position=(MODEL*pos).xyz;v_surface_to_light[i]=light.location-surface_world_position;\n#ifdef has_specularity\nv_surface_to_view[i]=CAMERA_WORLD_POSITION-surface_world_position;\n#endif\n}gl_Position=PROJECTION*model_view_pos;}",tn="#define GLSLIFY 1\n#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap) || defined(has_emissivemap)\n#define has_textures true\n#endif\n#ifdef has_textures\nvarying vec2 v_uv;\n#endif\n#ifdef has_specularity\nuniform float specularity;\n#endif\n#ifdef has_colormap\nuniform sampler2D colormap;\n#endif\n#ifdef has_emissivemap\nuniform sampler2D emissivemap;\n#endif\n#ifdef has_specularitymap\nuniform sampler2D specularitymap;\n#endif\n#ifdef has_bumpmap\nuniform sampler2D bumpmap;vec2 dHdxy_fwd(){vec2 dSTdx=dFdx(v_uv);vec2 dSTdy=dFdy(v_uv);float Hll=texture2D(bumpmap,v_uv).x;float dBx=texture2D(bumpmap,v_uv+dSTdx).x-Hll;float dBy=texture2D(bumpmap,v_uv+dSTdy).x-Hll;\n#ifdef has_bumpscale\nHll*=bumpscale;dBx*=bumpscale;dBy*=bumpscale;\n#endif\nreturn vec2(dBx,dBy);}vec3 perturbNormalArb(vec3 surf_pos,vec3 surface_normal,vec2 dHdxy){vec3 vSigmaX=vec3(dFdx(surf_pos.x),dFdx(surf_pos.y),dFdx(surf_pos.z));vec3 vSigmaY=vec3(dFdy(surf_pos.x),dFdy(surf_pos.y),dFdy(surf_pos.z));vec3 vN=surface_normal;vec3 R1=cross(vSigmaY,vN);vec3 R2=cross(vN,vSigmaX);float fDet=dot(vSigmaX,R1);fDet*=(float(gl_FrontFacing)*2.0-1.0);vec3 vGrad=sign(fDet)*(dHdxy.x*R1+dHdxy.y*R2);return normalize(abs(fDet)*surface_normal-vGrad);}\n#endif\n#ifdef has_bumpscale\nuniform float bumpscale;\n#endif\n#ifdef has_normalmap\nuniform sampler2D normalmap;vec3 perturbNormal2Arb(vec3 eye_pos,vec3 surface_normal){vec3 q0=vec3(dFdx(eye_pos.x),dFdx(eye_pos.y),dFdx(eye_pos.z));vec3 q1=vec3(dFdy(eye_pos.x),dFdy(eye_pos.y),dFdy(eye_pos.z));vec2 st0=dFdx(v_uv.st);vec2 st1=dFdy(v_uv.st);if(length(q0)==0.0){return surface_normal;}float scale=sign(st1.t*st0.s-st0.t*st1.s);vec3 S=normalize((q0*st1.t-q1*st0.t)*scale);vec3 T=normalize((-q0*st1.s+q1*st0.s)*scale);vec3 N=normalize(surface_normal);mat3 tsn=mat3(S,T,N);vec3 mapN=texture2D(normalmap,v_uv).xyz*2.0-1.0;mapN.xy*=(float(gl_FrontFacing)*2.0-1.0);return normalize(tsn*mapN);}\n#endif\n#ifdef has_color\nuniform vec3 color;\n#endif\n#ifdef has_emissive\nuniform vec3 emissive;\n#endif\n#ifdef has_alpha\nuniform float alpha;\n#endif\n#ifdef USE_FOG\nuniform vec3 FOG_COLOR;uniform float FOG_DENSITY;varying float v_fog_depth;\n#endif\nvarying vec3 v_normal;\n#if defined(has_normalmap) || defined(has_bumpmap)\nvarying vec3 v_view_position;\n#endif\nvarying vec3 v_surface_to_light[NUM_LIGHTS];varying vec3 v_surface_to_view[NUM_LIGHTS];void main(){vec3 normal=normalize(v_normal);\n#ifdef has_bumpmap\nnormal=perturbNormalArb(-v_view_position,normal,dHdxy_fwd());\n#elif defined(has_normalmap)\nnormal=perturbNormal2Arb(-v_view_position,normal);\n#endif\nvec3 lighting=vec3(0.0);vec3 spec_amount=vec3(0.0);for(int i=0;i<NUM_LIGHTS;i+=1){DirectionalLight light=DIRECTIONAL_LIGHTS[i];float multiplier=clamp(dot(normal,-light.direction),0.0,1.0);lighting+=multiplier*light.color*light.intensity;}for(int i=0;i<NUM_LIGHTS;i+=1){PointLight light=POINT_LIGHTS[i];vec3 surface_to_light=normalize(v_surface_to_light[i]);float multiplier=clamp(dot(normal,surface_to_light),0.0,1.0);lighting+=multiplier*light.color*light.intensity;\n#ifdef has_specularity\nvec3 surface_to_view=normalize(v_surface_to_view[i]);vec3 half_vector=normalize(surface_to_light+surface_to_view);float spec=clamp(dot(normal,half_vector),0.0,1.0);\n#ifdef has_specularitymap\nspec*=texture2D(specularitymap,v_uv).r;\n#endif\nspec_amount+=specularity*spec*light.color*light.intensity;\n#endif\n}\n#if defined(has_colormap)\ngl_FragColor=texture2D(colormap,v_uv);\n#elif defined(has_color)\ngl_FragColor=vec4(color,1.0);\n#endif\n#ifdef has_alpha\ngl_FragColor.a*=alpha;\n#endif\ngl_FragColor.rgb*=mix(AMBIENT_LIGHT,vec3(1.0,1.0,1.0),lighting);gl_FragColor.rgb+=spec_amount;\n#if defined(has_emissivemap)\ngl_FragColor.rgb+=texture2D(emissivemap,v_uv);\n#elif defined(has_emissive)\ngl_FragColor.rgb+=emissive;\n#endif\n#ifdef USE_FOG\ngl_FragColor.rgb=mix(gl_FragColor.rgb,FOG_COLOR,1.0-exp(-FOG_DENSITY*FOG_DENSITY*v_fog_depth*v_fog_depth));\n#endif\n}";function nn(t,n,e){let i,{location:o=[0,0,0]}=n,{rotation:r=[0,0,0]}=n,{scale:a=1}=n,{geometry:s}=n,{vert:l=Zt}=n,{frag:u=tn}=n,{uniforms:f={}}=n,{depthTest:d}=n,{doubleSided:m}=n,{transparent:h=!1}=n;const p=ot(),_=M(et),{ctm:v}=rt();c(t,v,(t=>e(18,i=t)));dt();const g=dt(),$={};let y=!0;let w,b,x,E,A,L,F;return T((()=>{$.material&&$.material.destroy()})),t.$$set=t=>{"location"in t&&e(1,o=t.location),"rotation"in t&&e(2,r=t.rotation),"scale"in t&&e(3,a=t.scale),"geometry"in t&&e(4,s=t.geometry),"vert"in t&&e(5,l=t.vert),"frag"in t&&e(6,u=t.frag),"uniforms"in t&&e(7,f=t.uniforms),"depthTest"in t&&e(8,d=t.depthTest),"doubleSided"in t&&e(9,m=t.doubleSided),"transparent"in t&&e(10,h=t.transparent)},t.$$.update=()=>{8&t.$$.dirty&&e(14,w="number"==typeof a?[a,a,a]:a),32772&t.$$.dirty&&e(15,b=Nt(b||Rt(),...r)),114690&t.$$.dirty&&e(16,x=_t(x||dt(),b,o,w)),458752&t.$$.dirty&&e(17,E=ht(E||dt(),i,x)),128&t.$$.dirty&&e(19,A=Object.keys(f).filter((t=>null!=f[t])).map((t=>`#define has_${t} true\n`)).join("")),524384&t.$$.dirty&&e(20,L=new Qt(p,l,u,A)),1048704&t.$$.dirty&&L.set_uniforms(f),1048592&t.$$.dirty&&e(21,F=s.instantiate(p,L.program)),131072&t.$$.dirty&&($.model=E),131072&t.$$.dirty&&($.model_inverse_transpose=(mt(g,E),function(t,n){if(t===n){var e=n[1],i=n[2],o=n[3],r=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=i,t[9]=r,t[11]=n[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}(g,g))),1048576&t.$$.dirty&&($.material=L),2097152&t.$$.dirty&&($.geometry=F),256&t.$$.dirty&&($.depthTest=d),512&t.$$.dirty&&($.doubleSided=m),1024&t.$$.dirty&&($.transparent=h),1024&t.$$.dirty&&(_.add_mesh($,y),y=!1),132096&t.$$.dirty&&h&&(_.needs_transparency_sort=!0),2228352&t.$$.dirty&&p.invalidate()},[v,o,r,a,s,l,u,f,d,m,h]}class en extends Q{constructor(t){super(),K(this,t,nn,null,a,{location:1,rotation:2,scale:3,geometry:4,vert:5,frag:6,uniforms:7,depthTest:8,doubleSided:9,transparent:10})}}function on(t,n,e){let i,{id:o}=n,{location:r=[0,0,0]}=n;const{get_target:a}=ot(),{ctm:s}=rt();c(t,s,(t=>e(8,i=t)));let l=dt();const u=new Float32Array(l.buffer,48,3),f=new Float32Array(3);let d,m,h;return t.$$set=t=>{"id"in t&&e(1,o=t.id),"location"in t&&e(2,r=t.location)},t.$$.update=()=>{4&t.$$.dirty&&e(5,d=r[0]),4&t.$$.dirty&&e(6,m=r[1]),4&t.$$.dirty&&e(7,h=r[2]),224&t.$$.dirty&&(e(4,f[0]=d,f),e(4,f[1]=m,f),e(4,f[2]=h,f)),280&t.$$.dirty&&e(3,l=pt(l,i,f)),10&t.$$.dirty&&a(o).set(u)},[s,o,r]}class rn extends Q{constructor(t){super(),K(this,t,on,null,a,{id:1,location:2})}}function an(t,n,e){let{color:i=[1,1,1]}=n,{intensity:o=.2}=n;const r=ot(),a={};return r.add_ambient_light(a),t.$$set=t=>{"color"in t&&e(0,i=t.color),"intensity"in t&&e(1,o=t.intensity)},t.$$.update=()=>{1&t.$$.dirty&&e(2,a.color=ct(i),a),2&t.$$.dirty&&e(2,a.intensity=o,a),4&t.$$.dirty&&r.invalidate()},[i,o]}class sn extends Q{constructor(t){super(),K(this,t,an,null,a,{color:0,intensity:1})}}function cn(t,n,e){let i,{direction:o=new Float32Array([-1,-1,-1])}=n,{color:r=new Float32Array([1,1,1])}=n,{intensity:a=1}=n;const s=ot(),{ctm:l}=rt();c(t,l,(t=>e(6,i=t)));const u={};let f;return s.add_directional_light(u),t.$$set=t=>{"direction"in t&&e(1,o=t.direction),"color"in t&&e(2,r=t.color),"intensity"in t&&e(3,a=t.intensity)},t.$$.update=()=>{98&t.$$.dirty&&e(5,f=bt(f||gt(),o,i)),48&t.$$.dirty&&e(4,u.direction=yt(u.direction||gt(),f),u),4&t.$$.dirty&&e(4,u.color=ct(r),u),8&t.$$.dirty&&e(4,u.intensity=a,u),16&t.$$.dirty&&s.invalidate()},[l,o,r,a]}class ln extends Q{constructor(t){super(),K(this,t,cn,null,a,{direction:1,color:2,intensity:3})}}function un(t,n,e){let i,{location:o=new Float32Array([-1,-1,-1])}=n,{color:r=new Float32Array([1,1,1])}=n,{intensity:a=1}=n;const s=ot(),{ctm:l}=rt();c(t,l,(t=>e(5,i=t)));let u={location:gt(),color:null,intensity:null};return s.add_point_light(u),t.$$set=t=>{"location"in t&&e(1,o=t.location),"color"in t&&e(2,r=t.color),"intensity"in t&&e(3,a=t.intensity)},t.$$.update=()=>{50&t.$$.dirty&&e(4,u.location=bt(u.location,o,i),u),4&t.$$.dirty&&e(4,u.color=ct(r),u),8&t.$$.dirty&&e(4,u.intensity=a,u),16&t.$$.dirty&&s.invalidate()},[l,o,r,a]}class fn extends Q{constructor(t){super(),K(this,t,un,null,a,{location:1,color:2,intensity:3})}}function dn(t,n,e){return t<n?n:t>e?e:t}function mn(t){let n,e=!1;function i(){t(n),e=!1}return function(t){e||(requestAnimationFrame(i),e=!0),n=t}}const hn=t=>({location:1&t,target:2&t}),pn=t=>({location:t[0],target:t[1]});function _n(t){let n;const e=t[7].default,i=l(e,t,t[6],pn);return{c(){i&&i.c()},m(t,e){i&&i.m(t,e),n=!0},p(t,[n]){i&&i.p&&67&n&&f(i,e,t,t[6],n,hn,pn)},i(t){n||(W(i,t),n=!0)},o(t){X(i,t),n=!1},d(t){i&&i.d(t)}}}const vn=1e-6;function gn(t,n){return Math.sqrt(t*t+n*n)}function $n(t,n,e){let{$$slots:i={},$$scope:o}=n;const r=ot();let{location:a=new Float32Array([1,3,5])}=n,{target:s=new Float32Array([0,1,0])}=n,{minDistance:c=0}=n,{maxDistance:l=1/0}=n,{minPolarAngle:u=0}=n,{maxPolarAngle:f=Math.PI}=n;function d(t,n){const i=a[0]-s[0],o=a[1]-s[1],r=a[2]-s[2],c=Math.sqrt(i*i+o*o+r*r);let l=Math.atan2(i,r);l-=t;let d=Math.acos(dn(o/c,-1,1));d=dn(d-n,vn,Math.PI-vn),d=dn(d,u,f);const m=Math.sin(d)*c,h=m*Math.sin(l),p=Math.cos(d)*c,_=m*Math.cos(l);e(0,a[0]=s[0]+h,a),e(0,a[1]=s[1]+p,a),e(0,a[2]=s[2]+_,a)}function m(t,n){const i=a[0]-s[0],o=(a[1],s[1],a[2]-s[2]);{const t=lt([i,o]),r=-t[0]*n,c=-t[1]*n;e(0,a[0]+=r,a),e(0,a[2]+=c,a),e(1,s[0]+=r,s),e(1,s[2]+=c,s)}{const n=lt([-o,i]),r=n[0]*t,c=n[1]*t;e(0,a[0]+=r,a),e(0,a[2]+=c,a),e(1,s[0]+=r,s),e(1,s[2]+=c,s)}}function h(t){let n=a[0]-s[0],i=a[1]-s[1],o=a[2]-s[2];const r=Math.sqrt(n*n+i*i+o*o);n/=t=dn(t,r/l,c?r/c:1/0),i/=t,o/=t,e(0,a[0]=s[0]+n,a),e(0,a[1]=s[1]+i,a),e(0,a[2]=s[2]+o,a)}function p(t){let n=t.clientX,e=t.clientY;const i=mn((t=>{const i=t.clientX,o=t.clientY,r=i-n,a=o-e;t.shiftKey||2===t.which?m(.01*r,.01*a):d(.005*r,.005*a),n=i,e=o}));window.addEventListener("mousemove",i),window.addEventListener("mouseup",(function t(n){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",t)}))}const _=mn((t=>{h(Math.pow(1.004,t.wheelDeltaY))}));function v(t){t.preventDefault(),_(t)}function g(t){1===t.touches.length&&function(t){t.preventDefault();const n=t.touches[0],e=n.identifier;let i=n.clientX,o=n.clientY;const r=mn((t=>{if(t.touches.length>1)return;const n=t.touches[0];n.identifier===e&&(d(.003*(n.clientX-i),.003*(n.clientY-o)),i=n.clientX,o=n.clientY)}));window.addEventListener("touchmove",r),window.addEventListener("touchend",(function t(n){let i=n.changedTouches.length;for(;i--;)if(n.changedTouches[i].identifier===e)return window.removeEventListener("touchmove",r),void window.removeEventListener("touchend",t)}))}(t),2===t.touches.length&&function(t){t.preventDefault();const n=t.touches[0],e=t.touches[1],i=n.identifier,o=e.identifier;let r=(n.clientX+e.clientX)/2,a=(n.clientY+e.clientY)/2,s=gn(e.clientX-n.clientX,e.clientY-n.clientY);const c=mn((t=>{if(2!==t.touches.length)return void alert(t.touches.length+" touches");const n=t.touches[0],e=t.touches[1];if(n.identifier!==i&&n.identifier!==o)return;if(e.identifier!==i&&e.identifier!==o)return;const c=(n.clientX+e.clientX)/2,l=(n.clientY+e.clientY)/2,u=gn(e.clientX-n.clientX,e.clientY-n.clientY);m(.01*(c-r),.01*(l-a)),h(u/s),r=c,a=l,s=u}));window.addEventListener("touchmove",c),window.addEventListener("touchend",(function t(n){let e=n.changedTouches.length;for(;e--;){const r=n.changedTouches[e];if(r.identifier===i||r.identifier===o)return window.removeEventListener("touchmove",c),void window.removeEventListener("touchend",t)}}))}(t)}return r.canvas.addEventListener("mousedown",p),r.canvas.addEventListener("mousewheel",v),r.canvas.addEventListener("touchstart",g),T((()=>{r.canvas.removeEventListener("mousedown",p),r.canvas.removeEventListener("mousewheel",v),r.canvas.removeEventListener("touchstart",g)})),t.$$set=t=>{"location"in t&&e(0,a=t.location),"target"in t&&e(1,s=t.target),"minDistance"in t&&e(2,c=t.minDistance),"maxDistance"in t&&e(3,l=t.maxDistance),"minPolarAngle"in t&&e(4,u=t.minPolarAngle),"maxPolarAngle"in t&&e(5,f=t.maxPolarAngle),"$$scope"in t&&e(6,o=t.$$scope)},[a,s,c,l,u,f,o,i]}class yn extends Q{constructor(t){super(),K(this,t,$n,_n,a,{location:0,target:1,minDistance:2,maxDistance:3,minPolarAngle:4,maxPolarAngle:5})}}function wn(n,e,i){let o,r,a,l,u=t,f=()=>(u(),u=s(T,(t=>i(12,r=t))),T);n.$$.on_destroy.push((()=>u()));let{location:d=[0,0,0]}=e,{lookAt:m=null}=e,{up:h=[0,1,0]}=e,{fov:p=60}=e,{near:_=1}=e,{far:v=2e4}=e;const{add_camera:g,update_camera:$,width:y,height:w,get_target:b}=ot();c(n,y,(t=>i(13,a=t))),c(n,w,(t=>i(14,l=t)));const{ctm:x}=rt();c(n,x,(t=>i(11,o=t)));const E=dt(),A=new Float32Array(E.buffer,48,3);let L={matrix:E,world_position:A,view:dt(),projection:dt()},T=tt(null);return f(),g(L),n.$$set=t=>{"location"in t&&i(4,d=t.location),"lookAt"in t&&i(5,m=t.lookAt),"up"in t&&i(6,h=t.up),"fov"in t&&i(7,p=t.fov),"near"in t&&i(8,_=t.near),"far"in t&&i(9,v=t.far)},n.$$.update=()=>{33&n.$$.dirty&&("string"==typeof m?f(i(0,T=b(m))):T.set(m)),7248&n.$$.dirty&&i(10,L.matrix=(pt(L.matrix,o,d),r&&vt(L.matrix,A,r,h),L.matrix),L),1024&n.$$.dirty&&i(10,L.view=mt(L.view,L.matrix),L),26496&n.$$.dirty&&i(10,L.projection=function(t,n,e,i,o){var r,a=1/Math.tan(n/2);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(r=1/(i-o),t[10]=(o+i)*r,t[14]=2*o*i*r):(t[10]=-1,t[14]=-2*i),t}(L.projection,p/180*Math.PI,a/l,_,v),L),1024&n.$$.dirty&&$(L)},[T,y,w,x,d,m,h,p,_,v]}class bn extends Q{constructor(t){super(),K(this,t,wn,null,a,{location:4,lookAt:5,up:6,fov:7,near:8,far:9})}}class xn{constructor(t,n,e,i,o,r){this.scene=t;const a=t.gl;this.attributes=e,this.index=i,this.primitive=o,this.count=r,this.locations={},this.buffers={};for(const t in e){const i=e[t];this.locations[t]=a.getAttribLocation(n,t);const o=a.createBuffer();this.buffers[t]=o,a.bindBuffer(a.ARRAY_BUFFER,o),a.bufferData(a.ARRAY_BUFFER,i.data,i.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW)}if(i){const t=a.createBuffer();this.buffers.__index=t,a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),a.bufferData(a.ELEMENT_ARRAY_BUFFER,i,a.STATIC_DRAW)}}set_attributes(t){for(const n in this.attributes){const e=this.attributes[n],i=this.locations[n];if(i<0)continue;const{size:o=3,type:r=t.FLOAT,normalized:a=!1,stride:s=0,offset:c=0}=e,l=this.buffers[n];t.bindBuffer(t.ARRAY_BUFFER,l),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,o,r,a,s,c)}}update(t,n,e){const i=this.scene,{gl:o}=i,r=this.attributes[t],a=this.buffers[t];if(o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,r.data=n,r.dynamic?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.count=e,e===1/0)throw new Error("GL.Geometry must be instantiated with one or more { data, size } attributes");i.invalidate()}}class En{constructor(t={},n={}){this.attributes=t;const{index:e,primitive:i="TRIANGLES"}=n;this.index=e,this.primitive=i.toUpperCase(),this.count=An(t),this.instances=new Map}instantiate(t,n){return this.instances.has(n)||this.instances.set(n,new xn(t,n,this.attributes,this.index,this.primitive,this.count)),this.instances.get(n)}update(t,n){this.attributes[t].data=n,this.count=An(this.attributes),this.instances.forEach((e=>{e.update(t,n,this.count)}))}}function An(t){let n=1/0;for(const e in t){const i=t[e].data.length/t[e].size;i<n&&(n=i)}return n}var Ln=ut((()=>new En({position:{data:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),size:3},normal:{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),size:3},uv:{data:new Float32Array([1,0,0,0,1,1,0,1]),size:2}},{index:new Uint32Array([0,1,2,3,2,1])})));const Tn=.85065080835204,Fn=.5257311121191336,Mn=new Float32Array([-Fn,+Tn,0,+Fn,+Tn,0,-Fn,-Tn,0,+Fn,-Tn,0,0,-Fn,+Tn,0,+Fn,+Tn,0,-Fn,-Tn,0,+Fn,-Tn,+Tn,0,-Fn,+Tn,0,+Fn,-Tn,0,-Fn,-Tn,0,+Fn]),In=new Uint16Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]),Sn=(new En({position:{data:Mn,size:3},normal:{data:Mn,size:3}},{index:In}),Math.PI),Rn=2*Sn;var On=ut((({turns:t=8,bands:n=6,shading:e="smooth"}={})=>"smooth"===e?function(t,n){const e=(t+1)*(n+1),i=2*(n-1)*t,o=new Float32Array(3*e),r=new Float32Array(2*e),a=new Uint32Array(3*i);let s=0,c=0;for(let e=0;e<=t;e+=1){const i=e/t;for(let t=0;t<=n;t+=1){const e=t/n,a=-Math.cos(i*Rn)*Math.sin(e*Sn),l=Math.cos(e*Sn),u=Math.sin(i*Rn)*Math.sin(e*Sn);o[s++]=a,o[s++]=l,o[s++]=u,r[c++]=i,r[c++]=e}}let l=0;for(let e=0;e<t;e+=1){const t=e*(n+1);a[l++]=t+0,a[l++]=t+1,a[l++]=t+n+2;for(let e=1;e<n-1;e+=1)a[l++]=t+e,a[l++]=t+e+1,a[l++]=t+e+n+1,a[l++]=t+e+n+1,a[l++]=t+e+1,a[l++]=t+e+n+2;a[l++]=t+n-1,a[l++]=t+n,a[l++]=t+2*n}return new En({position:{data:o,size:3},normal:{data:o,size:3},uv:{data:r,size:2}},{index:a})}(t,n):function(t,n){throw new Error("TODO implement flat geometry")}()));"undefined"!=typeof Blob&&URL.createObjectURL(new Blob(["self.onmessage = e => { self.onmessage = null; eval(e.data); };"],{type:"application/javascript"}))||"undefined"!=typeof window&&window.SVELTE_GL_WORKER_URL;function Nn(t,n,e){const i=t.slice();return i[4]=n[e].x,i[5]=n[e].y,i[6]=n[e].z,i[7]=n[e].color,i[8]=n[e].sz,i}function Dn(t){let n,e;return n=new bn({props:{location:t[11],lookAt:"center",near:.01,far:1e3}}),{c(){j(n.$$.fragment)},m(t,i){V(n,t,i),e=!0},p(t,e){const i={};2048&e&&(i.location=t[11]),n.$set(i)},i(t){e||(W(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function zn(t){let n,e;return n=new en({props:{geometry:On({turns:36,bands:36}),location:[t[4],t[5],t[6]],scale:t[8],uniforms:{color:t[7],alpha:.9},transparent:!0}}),{c(){j(n.$$.fragment)},m(t,i){V(n,t,i),e=!0},p(t,e){const i={};2&e&&(i.location=[t[4],t[5],t[6]]),2&e&&(i.scale=t[8]),2&e&&(i.uniforms={color:t[7],alpha:.9}),n.$set(i)},i(t){e||(W(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function Pn(n){let e,i,o,r;return e=new en({props:{geometry:On({turns:36,bands:36}),location:[0,.2,0],scale:.1,uniforms:{color:16777215,emissive:13421721}}}),o=new fn({props:{location:[0,0,0],color:16777215,intensity:.6}}),{c(){j(e.$$.fragment),i=g(),j(o.$$.fragment)},m(t,n){V(e,t,n),p(t,i,n),V(o,t,n),r=!0},p:t,i(t){r||(W(e.$$.fragment,t),W(o.$$.fragment,t),r=!0)},o(t){X(e.$$.fragment,t),X(o.$$.fragment,t),r=!1},d(t){J(e,t),t&&_(i),J(o,t)}}}function Gn(t){let n,e,i,o,r,a,s,c,l,u,f,d,m;n=new rn({props:{id:"center",location:[0,0,0]}}),i=new yn({props:{maxPolarAngle:Math.PI/2,$$slots:{default:[Dn,({location:t})=>({11:t}),({location:t})=>t?2048:0]},$$scope:{ctx:t}}}),r=new sn({props:{intensity:.3}}),s=new ln({props:{direction:[-1,-1,-1],intensity:.5}}),l=new en({props:{geometry:Ln(),location:[0,-.01,0],rotation:[-90,0,0],scale:10,uniforms:{color:16777215}}});let h=t[1],v=[];for(let n=0;n<h.length;n+=1)v[n]=zn(Nn(t,h,n));const $=t=>X(v[t],1,1,(()=>{v[t]=null}));return d=new qt({props:{location:[t[0].x,t[0].y,t[0].z],$$slots:{default:[Pn]},$$scope:{ctx:t}}}),{c(){j(n.$$.fragment),e=g(),j(i.$$.fragment),o=g(),j(r.$$.fragment),a=g(),j(s.$$.fragment),c=g(),j(l.$$.fragment),u=g();for(let t=0;t<v.length;t+=1)v[t].c();f=g(),j(d.$$.fragment)},m(t,h){V(n,t,h),p(t,e,h),V(i,t,h),p(t,o,h),V(r,t,h),p(t,a,h),V(s,t,h),p(t,c,h),V(l,t,h),p(t,u,h);for(let n=0;n<v.length;n+=1)v[n].m(t,h);p(t,f,h),V(d,t,h),m=!0},p(t,n){const e={};if(6144&n&&(e.$$scope={dirty:n,ctx:t}),i.$set(e),2&n){let e;for(h=t[1],e=0;e<h.length;e+=1){const i=Nn(t,h,e);v[e]?(v[e].p(i,n),W(v[e],1)):(v[e]=zn(i),v[e].c(),W(v[e],1),v[e].m(f.parentNode,f))}for(k(),e=h.length;e<v.length;e+=1)$(e);q()}const o={};1&n&&(o.location=[t[0].x,t[0].y,t[0].z]),4096&n&&(o.$$scope={dirty:n,ctx:t}),d.$set(o)},i(t){if(!m){W(n.$$.fragment,t),W(i.$$.fragment,t),W(r.$$.fragment,t),W(s.$$.fragment,t),W(l.$$.fragment,t);for(let t=0;t<h.length;t+=1)W(v[t]);W(d.$$.fragment,t),m=!0}},o(t){X(n.$$.fragment,t),X(i.$$.fragment,t),X(r.$$.fragment,t),X(s.$$.fragment,t),X(l.$$.fragment,t),v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)X(v[t]);X(d.$$.fragment,t),m=!1},d(t){J(n,t),t&&_(e),J(i,t),t&&_(o),J(r,t),t&&_(a),J(s,t),t&&_(c),J(l,t),t&&_(u),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(v,t),t&&_(f),J(d,t)}}}function Cn(t){let n,e;return n=new St({props:{$$slots:{default:[Gn]},$$scope:{ctx:t}}}),{c(){j(n.$$.fragment)},m(t,i){V(n,t,i),e=!0},p(t,[e]){const i={};4099&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i)},i(t){e||(W(n.$$.fragment,t),e=!0)},o(t){X(n.$$.fragment,t),e=!1},d(t){J(n,t)}}}function Hn(t,n,e){let i=(t,n)=>t+(n-t)*Math.random(),o={},r=[];for(let t=0;t<10;t++)r.push({x:i(-4,4),y:i(.5,2),z:i(-4,4),dx:i(-1,1),dy:i(-1,1),dz:i(-1,1),color:Math.floor(16777216*Math.random()),sz:i(.2,.5)});return L((()=>{let t,n=()=>{t=requestAnimationFrame(n),e(0,o.x=3*Math.sin(.001*Date.now()),o),e(0,o.y=2.5+2*Math.sin(4e-4*Date.now()),o),e(0,o.z=3*Math.cos(.002*Date.now()),o);let i=.02;for(let t of r)t.x+=i*t.dx,t.y+=i*t.dy,t.z+=i*t.dz,t.dy-=.01,t.y-t.sz<=t.sz&&(t.dy=Math.abs(t.dy)),t.x+t.sz>=5&&(t.dx=-Math.abs(t.dx)),t.x-t.sz<=-5&&(t.dx=Math.abs(t.dx)),t.z+t.sz>=5&&(t.dz=-Math.abs(t.dz)),t.z-t.sz<=-5&&(t.dz=Math.abs(t.dz));e(1,r)};return n(),()=>cancelAnimationFrame(t)})),[o,r]}return new class extends Q{constructor(t){super(),K(this,t,Hn,Cn,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
